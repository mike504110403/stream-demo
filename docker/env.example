# 🐳 Docker 環境配置範例文件
# 複製此文件為 .env 並根據需要修改配置

# ==============================================
# 🗄️ 資料庫配置
# ==============================================

# PostgreSQL 配置
POSTGRES_DB=stream_demo
POSTGRES_USER=stream_user
POSTGRES_PASSWORD=stream_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# MySQL 配置
MYSQL_ROOT_PASSWORD=root_password
MYSQL_DATABASE=stream_demo
MYSQL_USER=stream_user
MYSQL_PASSWORD=stream_password
MYSQL_HOST=localhost
MYSQL_PORT=3306

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==============================================
# 🔧 應用程序配置
# ==============================================

# 當前使用的資料庫類型 (mysql|postgresql)
DATABASE_TYPE=postgresql

# 運行環境 (local|development|staging|production)
APP_ENV=local

# JWT 密鑰 (生產環境請使用強密鑰)
JWT_SECRET=your_jwt_secret_key_here

# 服務器配置
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# ==============================================
# 📦 存儲配置
# ==============================================

# MinIO 配置 (本地 S3 兼容存儲)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_SERVER_URL=http://localhost:9000
MINIO_BROWSER_REDIRECT_URL=http://localhost:9001

# S3 兼容配置
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=stream-demo-videos
S3_PROCESSED_BUCKET=stream-demo-processed

# ==============================================
# 📺 直播配置
# ==============================================

# RTMP 推流配置
RTMP_PORT=1935
RTMP_APP=live

# HLS 播放配置
HLS_PORT=8083
HLS_PATH=/tmp/hls

# 公開直播配置
PUBLIC_STREAMS_PATH=/tmp/public_streams

# ==============================================
# 🌐 網路配置
# ==============================================

# 前端配置
FRONTEND_HOST=localhost
FRONTEND_PORT=5173

# 後端配置
BACKEND_HOST=localhost
BACKEND_PORT=8080

# 統一入口配置
UNIFIED_PORT=8084

# ==============================================
# 🌐 管理工具配置
# ==============================================

# Redis Commander
REDIS_COMMANDER_PORT=8081
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=admin123

# phpMyAdmin
PHPMYADMIN_PORT=8082

# pgAdmin
PGADMIN_PORT=8083
PGADMIN_EMAIL=admin@stream-demo.com
PGADMIN_PASSWORD=admin123

# ==============================================
# ☁️ AWS 服務配置（可選）
# ==============================================

# AWS S3 配置
AWS_REGION=ap-northeast-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
S3_BUCKET=stream-demo-videos
S3_CDN_DOMAIN=https://d1234567890.cloudfront.net

# AWS MediaConvert 配置
MEDIACONVERT_ENDPOINT=https://abcdefg.mediaconvert.ap-northeast-1.amazonaws.com
MEDIACONVERT_ROLE_ARN=arn:aws:iam::123456789012:role/MediaConvertRole

# ==============================================
# 🧪 測試配置
# ==============================================

# 測試資料庫
TEST_DATABASE_TYPE=postgresql
TEST_POSTGRES_DB=stream_demo_test
TEST_MYSQL_DB=stream_demo_test

# 測試 Redis DB
TEST_REDIS_DB=15
TEST_CACHE_DB=14
TEST_MESSAGING_DB=13

# ==============================================
# 📊 監控和日誌配置
# ==============================================

# 日誌級別 (debug|info|warn|error)
LOG_LEVEL=info

# 是否啟用詳細日誌
VERBOSE_LOGGING=false

# 慢查詢日誌閾值（毫秒）
SLOW_QUERY_THRESHOLD=1000

# 健康檢查配置
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# ==============================================
# 🔒 安全配置
# ==============================================

# CORS 配置
CORS_ALLOW_ORIGIN=*
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization

# 速率限制
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# ==============================================
# 📝 使用說明
# ==============================================

# 1. 複製此文件為 .env
#    cp env.example .env
#
# 2. 根據環境修改配置
#    - 開發環境：使用預設值
#    - 生產環境：修改密碼、端口等
#
# 3. 安全注意事項
#    - 生產環境必須修改所有密碼
#    - JWT_SECRET 必須使用強密鑰
#    - 限制 CORS 來源
#    - 啟用 HTTPS
#
# 4. 配置優先級
#    - 環境變數 > .env 文件 > 預設值 